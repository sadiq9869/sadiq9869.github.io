<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Supreme AI Chat</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1f1c2c, #928dab);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    h1 {
      margin-top: 20px;
      font-size: 40px;
      color: #00ffff;
      text-shadow: 0 0 12px #00ffff;
    }
    #response {
      margin-top: 30px;
      width: 90%;
      max-width: 600px;
      background-color: rgba(0, 0, 0, 0.3);
      padding: 20px;
      border-radius: 10px;
      font-size: 16px;
      min-height: 80px;
      white-space: pre-wrap;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow-y: auto;
      max-height: 70vh;
    }
    .signature {
      font-size: 18px;
      font-weight: bold;
      color: #00ffff;
      text-shadow: 0 0 6px #00ffff, 0 0 12px #00ffff;
      border: 2px solid #00ffff;
      border-radius: 20px;
      padding: 6px 14px;
      background: rgba(0, 0, 0, 0.3);
      box-shadow: 0 0 10px #00ffff, inset 0 0 8px #00ffff;
      opacity: 0.9;
      animation: signatureGlow 3s infinite alternate;
    }
    @keyframes signatureGlow {
      0% { text-shadow: 0 0 4px #00ffff; }
      100% { text-shadow: 0 0 12px #00ffff; }
    }
    .user-msg {
      align-self: flex-end;
      background-color: #007b7b;
      padding: 8px 15px;
      border-radius: 15px;
      max-width: 80%;
      margin-top: 5px;
    }
    .ai-msg {
      align-self: flex-start;
      background-color: rgba(0,0,0,0.5);
      padding: 8px 15px;
      border-radius: 15px;
      max-width: 80%;
      font-weight: bold;
      margin-top: 5px;
    }
    #askBtn {
      margin-top: 20px;
      padding: 12px 25px;
      font-size: 16px;
      background-color: #00ffff;
      color: #000;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 10px #00ffff, 0 0 25px #00ffff inset;
      transition: transform 0.2s ease;
    }
    #askBtn:hover {
      transform: scale(1.05);
    }
    .input-section {
      position: fixed;
      bottom: 60px;
      width: 80%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 20px;
    }
    #chatInput {
      width: 100%;
      padding: 8px 15px;
      border: 2px solid #00ffff;
      border-radius: 20px;
      font-size: 14px;
      outline: none;
      background-color: rgba(0, 0, 0, 0.5);
      color: #fff;
      box-shadow: inset 0 0 6px #000, 0 0 8px #00ffff;
    }
    #chatInput::placeholder {
      color: #ccc;
      text-shadow: 0 0 6px #00ffff;
    }
    #warning {
      position: fixed;
      bottom: 28px;
      width: 100%;
      text-align: center;
      font-size: 11px;
      color: #ffc107;
      opacity: 0.95;
      text-shadow: 0 0 10px #ffc107, 0 0 20px #ffc107;
    }
    footer {
      position: fixed;
      bottom: 15px;
      width: 100%;
      text-align: center;
      font-size: 8px;
      color: #fff;
      opacity: 0.85;
      text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff;
    }
  </style>
</head>
<body>
  <h1>ðŸš€ Supreme AI</h1>
  <div id="response">
    <div id="signature" class="signature">ðŸš€ Supreme <strong>AI</strong> âœª</div>
  </div>
  <button id="askBtn" onclick="sendMessage()">Ask Supreme AI</button>
  <div class="input-section">
    <input type="text" id="chatInput" placeholder="Ask me anything..." />
  </div>
  <div id="warning">âš  Supreme AI may make mistakes. Please verify important info.</div>
  <footer>
    Supreme AI made in Â© 2025 â€¢ Owner: <strong>Sadiq Siddiqui (Siddique)</strong>
  </footer>
  <script>
    const GEMINI_API_KEY = "AIzaSyDAm_zAas5YQdQTCI2WoxYDEOXZfwpXUDc"; 
    let memory = JSON.parse(localStorage.getItem("supremeMemory")) || [];
    let firstMessage = true;

    function saveMemory() {
      localStorage.setItem("supremeMemory", JSON.stringify(memory.slice(-20)));
    }

    async function sendMessage() {
      const inputField = document.getElementById("chatInput");
      const userInput = inputField.value.trim();
      const responseBox = document.getElementById("response");
      const signature = document.getElementById("signature");

      if (userInput === "") return;

      // hide signature on first message
      if (signature) signature.style.display = "none";

      // show user message
      const userMsg = document.createElement("div");
      userMsg.className = "user-msg";
      userMsg.textContent = userInput;
      responseBox.appendChild(userMsg);

      // store to memory
      memory.push({ role: "user", text: userInput });
      saveMemory();

      // summarization if too big
      if (memory.length > 20) {
        memory = memory.slice(-20);
      }

      // advanced repeat detection
      let repeatCheck = memory.filter(m => m.text.toLowerCase() === userInput.toLowerCase());
      if (repeatCheck.length > 1) {
        const aiMsg = document.createElement("div");
        aiMsg.className = "ai-msg";
        aiMsg.innerHTML = `<span style="color:red;">Supreme AI:</span> You asked this already! Please try a new question.`;
        responseBox.appendChild(aiMsg);
        inputField.value = "";
        responseBox.scrollTop = responseBox.scrollHeight;
        return;
      }

      // AI message
      const aiMsg = document.createElement("div");
      aiMsg.className = "ai-msg";

      const promptMessages = memory.map(m => `${m.role}: ${m.text}`).join("\n");

      const finalPrompt = `
      You are Supreme AI, created and owned by Sadiq Siddiqui (also known as Siddique). 
      Always reply politely, advanced, professional, and human-like. 
      Avoid repeating. If user says "who are you", politely introduce yourself. 
      If user asks about your name, explain why Supreme AI, and your owner info.
      Here is your conversation so far:
      ${promptMessages}
      `;

      try {
        const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_API_KEY}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            contents: [
              { parts: [{ text: finalPrompt }] }
            ]
          })
        });
        const data = await res.json();
        const text = data.candidates?.[0]?.content?.parts?.[0]?.text || "Supreme AI could not generate a reply.";
        aiMsg.innerHTML = `<span style="color:cyan;">Supreme AI:</span> ${text}`;
        responseBox.appendChild(aiMsg);

        // store answer to memory
        memory.push({ role: "ai", text });
        saveMemory();

      } catch (err) {
        aiMsg.innerHTML = `<span style="color:red;">Supreme AI:</span> Sorry, there was an error contacting Gemini API.`;
        responseBox.appendChild(aiMsg);
      }

      inputField.value = "";
      responseBox.scrollTop = responseBox.scrollHeight;
    }
  </script>
</body>
</html>
